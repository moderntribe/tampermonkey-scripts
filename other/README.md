# Tribe Sniffer
Author: Andras Guseo  
Release date: April 26, 2020

## Description
This is a tool created for the Support Team at Modern Tribe | The Events Calendar.

* tribe-sniffer.user.js - TamperMonkey script
* tribe-sniffer.min.js - Bookmarklet script

## What does it do?
The script adds a sniffer button to the lower right corner of each webpage.
With clicking on the button on a WordPress site that is running our plugins the sniffer will check the following attributes on the page:

### Page attributes
* Is it Single Event view?
  * Which editor was used? Classic or Block?
* Is it V1 or V2 design?
* Is this a default calendar page or was it generated by a shortcode?
  * Built-in shortcode
  * The Events Calendar Shortcode & Block
  * The Events Calendar Shortcode and Templates Addon
  
 ### Environment
 * Theme used 
 * WordPress version
 * TEC version
 * ECP version
 * Filter Bar version
 * ET version
 * ET+ version
 * WooCommerce version
 
 ### Is a caching plugin in use?
 The sniffer checks for the presence of the following caching plugins:
* Autoptimize
* WP-Super-Cache
* WP Fastest Cache
* W3 Total Cache
* Hummingbird
* WP Rocket
* LiteSpeed Cache
* Endurance Page Cache

## How to use it
This tool can be used as a TamperMonkey script or as a bookmarklet.

### Install as a TamperMonkey script
As you would any other Tampermonkey Scripts. Please refer to the readme file in the [root of this repository](https://github.com/moderntribe/tampermonkey-scripts/blob/master/README.md).

### Quick deploy as a bookmarklet

1. Copy the one-line script from `tribe-sniffer.min.js` to your clipboard.
2. In your preferred browser create a new bookmark button on the bookmark bar.
3. Name it "Tribe Sniffer" or whatever you like.
4. Paste the code into the location / URL field and save it.
5. When visiting a webpage click on the bookmark button. A popup dialog will contain the information.

### Slow deploy as a bookmarklet

The non-minified file is a TamperMonkey script. It will run on the websites defined with `@include`, which currently is 
all the sites.

To use it as a bookmarklet you will need to minimize the script. You can use an online tool like 
https://javascript-minifier.com/

Here are the steps to create a bookmarklet from the code:

1. Take the popup() function (starting with `function` and ending with `}`) and run it through the minifier.
2. Change the beginning from `function popup()` to `javascript:(function()`. (Delete `popup` and add `javacript:(`.)
3. Change the end from `};` to `})();`. (Add a closing parentheses `)();` after the curly bracket `}`.)
4. Select the minified code and copy it on your clipboard.
5. In your preferred browser create a new bookmark button on the bookmark bar.
6. Name it "Tribe Sniffer" or whatever you like.
7. Paste the code into the location / URL field and save it.
8. When visiting a webpage click on the bookmark button. A popup dialog will contain the information.

## Sample screenshot

This is what you will approximately get when clicking the button.
 
![image](https://user-images.githubusercontent.com/2614506/80293451-c7af0380-875f-11ea-9a86-270b167ea58e.png)

## Changelog
1.2.0 - 2020-09-18
* Made it work like a TamperMonkey script. The script will now add a button at the bottom right corner of every page
* Improved 3rd party shortcode detection

1.1.0 - 2020-09-17
* Improved theme detection
* Improved version number detection to adequately display "not found" when version number is not found
* Added Endurance Page Cache to the caching plugin list
* Added LiteSpeed Cache to the caching plugin list

1.0.0 - 2020-04-26
* Initial release
